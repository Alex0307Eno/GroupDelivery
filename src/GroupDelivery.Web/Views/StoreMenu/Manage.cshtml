@{ ViewData["Title"] = "菜單管理"; }
<div id="app" data-store-id="@Context.Request.Query["storeId"]">
    <app-loading :show="loading || submitting"></app-loading>
    <app-toast :items="toasts" v-on:remove="removeToast"></app-toast>
    <div class="card mb-3"><div class="card-body">
        <h4>新增商品</h4>
        <div class="row g-2">
            <div class="col-md-5"><input class="form-control" v-model="form.name" placeholder="品名" /><app-form-error :errors="errors" field="name"></app-form-error></div>
            <div class="col-md-3"><input class="form-control" v-model="form.price" v-on:input="form.price = toNumberInput(form.price)" v-on:blur="moneyBlur('price')" placeholder="價格" /><app-form-error :errors="errors" field="price"></app-form-error></div>
            <div class="col-md-4 d-grid"><button class="btn btn-primary" :disabled="submitting" v-on:click="save">新增</button></div>
        </div>
    </div></div>
    <div class="mb-2">
        <button class="btn btn-outline-success btn-sm me-2" v-on:click="batch(true)">批次上架</button>
        <button class="btn btn-outline-secondary btn-sm" v-on:click="batch(false)">批次下架</button>
    </div>
    <table class="table" v-if="products.length"><thead><tr><th></th><th>品名</th><th>價格</th><th>狀態</th></tr></thead>
        <tbody><tr v-for="product in products" :key="product.productId"><td><input type="checkbox" :value="product.productId" v-model="selected" /></td><td>{{ product.name }}</td><td><app-money :value="product.price"></app-money></td><td>{{ product.isActive ? '上架' : '下架' }}</td></tr></tbody>
    </table>
    <app-empty-state v-else text="目前沒有商品"></app-empty-state>
</div>
@section Scripts {
<script src="/js/api/apiClient.js"></script>
<script src="/js/components/app-components.js"></script>
<script src="/js/pages/merchant-products.js"></script>
}
