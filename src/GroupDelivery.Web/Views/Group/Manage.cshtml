@model GroupDelivery.Domain.GroupOrder
@{ ViewData["Title"] = "揪團管理"; }
<div id="app" data-group-id="@Model.GroupOrderId">
    <app-loading :show="loading || submitting"></app-loading>
    <app-toast :items="toasts" v-on:remove="removeToast"></app-toast>
    <div v-if="detail" class="card"><div class="card-body">
        <h4>揪團管理</h4>
        <div>目前金額：<app-money :value="detail.currentAmount"></app-money></div>
        <div>距離成團差額：<app-money :value="detail.diffAmount"></app-money></div>
        <div>剩餘時間：{{ detail.remainingText }}</div>
        <button class="btn btn-outline-danger me-2" :disabled="submitting" v-on:click="closeGroup">手動關團</button>
        <button class="btn btn-outline-primary" v-on:click="exportOrders">匯出訂單</button>
        <hr />
        <table class="table" v-if="detail.orders && detail.orders.length"><thead><tr><th>訂單人</th><th>金額</th><th>時間</th><th>狀態</th></tr></thead>
            <tbody><tr v-for="order in detail.orders" :key="order.orderId"><td>{{ order.userName }}</td><td><app-money :value="order.amount"></app-money></td><td>{{ order.createdAt }}</td><td>{{ order.status }}</td></tr></tbody>
        </table>
        <app-empty-state v-else text="目前沒有訂單"></app-empty-state>
    </div></div>
</div>
@section Scripts {
<script src="/js/api/apiClient.js"></script>
<script src="/js/components/app-components.js"></script>
<script src="/js/pages/merchant-group-manage.js"></script>
}
