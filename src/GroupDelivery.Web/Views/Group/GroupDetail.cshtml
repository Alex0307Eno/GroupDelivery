@{ ViewData["Title"] = "揪團詳情"; }
<div id="app" data-group-id="@ViewData["GroupId"]">
    <app-loading :show="loading || submitting"></app-loading>
    <app-toast :items="toasts" v-on:remove="removeToast"></app-toast>
    <div v-if="detail" class="row g-3">
        <div class="col-lg-8">
            <div class="card mb-3"><div class="card-body">
                <h4>{{ detail.storeName }}</h4>
                <div>剩餘時間：{{ detail.remainingText }}</div>
                <div>目前金額：<app-money :value="detail.currentAmount"></app-money></div>
            </div></div>
            <div class="card"><div class="card-body">
                <h5>商品清單</h5>
                <div class="row g-2" v-for="item in (detail.products || [])" :key="item.productId">
                    <div class="col-5">{{ item.name }}</div>
                    <div class="col-3"><app-money :value="item.price"></app-money></div>
                    <div class="col-2"><input class="form-control" v-model="qtyMap[item.productId]" /></div>
                    <div class="col-2"><button class="btn btn-outline-primary w-100" v-on:click="addToCart(item)">加入</button></div>
                </div>
            </div></div>
        </div>
        <div class="col-lg-4">
            <div class="card"><div class="card-body">
                <h5>購物車</h5>
                <div v-for="item in cart" :key="item.productId">{{ item.name }} x {{ item.qty }}</div>
                <hr /><div>總額：<app-money :value="totalAmount"></app-money></div>
                <button class="btn btn-success w-100 cta-mobile-fixed" :disabled="submitting" v-on:click="submitOrder">送出訂單</button>
            </div></div>
        </div>
    </div>
</div>
@section Scripts {
<script src="/js/api/apiClient.js"></script>
<script src="/js/components/app-components.js"></script>
<script src="/js/pages/consumer-group-detail.js"></script>
}
